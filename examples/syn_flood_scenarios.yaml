tests:
  - name: krkn-hub-*
    index: krkn-telemetry*
    benchmarkIndex: krkn-metrics*
    version: cluster_version
    uuid_field: run_uuid
    metadata:
      cluster_version: "{{ version }}"
      scenarios.scenario_type: syn_flood_scenarios
      cloud_infrastructure: AWS  # Options: AWS, IBMCloud, GCP, Azure, VSphere
      cloud_type: self-managed   # Options: self-managed, rosa
      total_node_count: 9
      node_summary_infos.instance_type: "*xlarge*"  # Matches: m6a.xlarge (masters), r5.xlarge (workers)
      network_plugins: OVNKubernetes
      scenarios.scenario: "*syn_flood_scenario.yaml"
    metrics:
      # Recovery & Health metrics (specific to syn flood scenarios)
      - name: health_check_recovery
        metricName: health_check_recovery
        metric_of_interest: duration
        agg:
          value: duration
          agg_type: avg

      # API Server metrics
      - name: api_inflight_requests
        metricName: APIInflightRequests
        metric_of_interest: value
        agg:
          value: value
          agg_type: max
      - name: api_request_rate
        metricName: APIRequestRate
        metric_of_interest: value
        agg:
          value: value
          agg_type: max

      # Node Resource metrics
      - name: infra_node_cpu
        metricName: nodeCPUSeconds-Infra
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: master_node_cpu
        metricName: nodeCPUSeconds-Masters
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: worker_node_cpu
        metricName: nodeCPUSeconds-Workers
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max

      # Container Resource metrics
      - name: masters_cpu
        metricName: cpu-masters
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: workers_cpu
        metricName: cpu-workers
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: max_workers_cpu
        metricName: max-cpu-workers
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max

      # Kubelet metrics
      - name: kubelet_cpu
        metricName: cpu-kubelet
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: max_kubelet_cpu
        metricName: max-cpu-kubelet
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max

      # Container Runtime metrics
      - name: crio_cpu
        metricName: cpu-crio
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max

      # Network metrics
      - name: ovnkube_node_cpu
        metricName: cpu-ovnkube-node
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: multus_cpu
        metricName: cpu-multus
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: ovn_control_plane_cpu
        metricName: cpu-ovn-control-plane
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max

      # Router metrics
      - name: router_cpu
        metricName: cpu-router
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max

      # etcd metrics
      - name: etcd_99th_backend_commit_avg
        metricName: 99thEtcdDiskBackendCommit
        metric_of_interest: value
        agg:
          value: value
          agg_type: avg
      - name: etcd_99th_wal_fsync_avg
        metricName: 99thEtcdDiskWalFsync
        metric_of_interest: value
        agg:
          value: value
          agg_type: avg
      - name: etcd_99th_round_trip_time_avg
        metricName: 99thEtcdRoundTripTime
        metric_of_interest: value
        agg:
          value: value
          agg_type: avg
      - name: etcd_cpu
        metricName: cpu-etcd
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max

      # Monitoring metrics
      - name: prometheus_cpu
        metricName: cpu-prometheus
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: max_prometheus_cpu
        metricName: max-cpu-prometheus
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max

      # Controller Manager metrics
      - name: kube_controller_manager_cpu
        metricName: cpu-kube-controller-manager
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: openshift_controller_manager_cpu
        metricName: cpu-openshift-controller-manager
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max

      # Additional etcd metrics
      - name: etcd_99th_backend_commit_duration_seconds
        metricName: 99thEtcdDiskBackendCommitDurationSeconds
        metric_of_interest: value
        agg:
          value: value
          agg_type: avg
      - name: etcd_99th_wal_fsync_duration_seconds
        metricName: 99thEtcdDiskWalFsyncDurationSeconds
        metric_of_interest: value
        agg:
          value: value
          agg_type: avg
      - name: etcd_99th_round_trip_time_seconds
        metricName: 99thEtcdRoundTripTimeSeconds
        metric_of_interest: value
        agg:
          value: value
          agg_type: avg

      # Additional CPU metrics
      - name: max_cpu_crio
        metricName: max-cpu-crio
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: max_cpu_infra
        metricName: max-cpu-infra
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: max_cpu_kube_controller_manager
        metricName: max-cpu-kube-controller-manager
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: cpu_infra
        metricName: cpu-infra
        metric_of_interest: value
        agg:
          value: cpu
          agg_type: max
      - name: cpu_cluster_usage_ratio
        metricName: cpu-cluster-usage-ratio
        metric_of_interest: value
        agg:
          value: value
          agg_type: avg 